<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Welcome to - The Story so Far...</title>
    <link rel="stylesheet" href="assets/styles.css">  <!-- Link to your stylesheet -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text:ital@0;1&family=Vollkorn:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <script data-goatcounter="https://tssf.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


 </head>

  <body>

  <div class="container animate__fadeIn animate__animated animate__slower">
        <div class="container-logo--home text-center">
            <img class="logo" alt="The Story so Far" src="assets/img/logo.jpeg"/>
            <h1>The story so far...</h1>
        </div>
  </div>


  <div class="container-fluid">
      <div class="search text-center">
          <input class="form-control" type="text" id="searchInput" placeholder="Enter game title i.e. 'Portal 2'" onkeyup="search()">
          <div id="results" class="animate__fadeInDown animate__animated"></div>
      </div>
  </div>

  <div id="marquee-container">
       <div id="marquee-content"></div>
   </div>


  <div class="container">
      <div class="intro text-center">
          <h3>Has it been a while since you played a <b><i>video game</i></b>? Catch up with the story so far, and scroll until you have caught up in a <b><i>spoiler-free</i></b> environment!</h3>
      </div>
  </div>

      <script src="assets/search.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

      <script>
            $(document).ready(function() {
                // Fetch the JSON data from the external file
                $.getJSON('search_index.json', function(data) {

                    // Function to shuffle the array
                    function shuffleArray(array) {
                        for (let i = array.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [array[i], array[j]] = [array[j], array[i]];
                        }
                        return array;
                    }

                    // Select 20 random links
                    const randomLinks = shuffleArray(data).slice(0, 20);

                    // Create the marquee content
                    let marqueeContent = '';
                    randomLinks.forEach(link => {
                        marqueeContent += `<a href="${link.permalink}" title="${link.snippet}">${link.title}</a>`;
                    });

                    // Duplicate the content to make it seamless
                    marqueeContent += marqueeContent;

                    // Inject marquee content into the container
                    $('#marquee-content').html(marqueeContent);
                });
            });
        </script>

  </body>
</html>
